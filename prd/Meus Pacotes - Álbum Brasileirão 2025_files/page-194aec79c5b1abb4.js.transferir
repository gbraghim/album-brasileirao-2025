(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{4546:(e,s,a)=>{Promise.resolve().then(a.bind(a,5587))},5587:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var t=a(5155),l=a(2115),r=a(2108),i=a(5695),o=a(5939),n=a(8212),c=a(4500);function d(e){let{isOpen:s,onClose:a,figurinhas:r}=e;return(0,t.jsx)(o.e.Root,{show:s,as:l.Fragment,children:(0,t.jsxs)(n.lG,{as:"div",className:"relative z-10",onClose:a,children:[(0,t.jsx)(o.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,t.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,t.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,t.jsx)(o.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,t.jsxs)(n.lG.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white/90 backdrop-blur-sm px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,t.jsx)("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:(0,t.jsxs)("button",{type:"button",className:"rounded-md bg-white text-brasil-blue hover:text-brasil-green focus:outline-none focus:ring-2 focus:ring-brasil-green focus:ring-offset-2",onClick:a,children:[(0,t.jsx)("span",{className:"sr-only",children:"Fechar"}),(0,t.jsx)(c.A,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[(0,t.jsx)(n.lG.Title,{as:"h3",className:"text-lg font-semibold leading-6 text-brasil-blue mb-4",children:"Figurinhas do Pacote"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:r.map(e=>(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg shadow-lg p-4 border border-brasil-yellow/20 relative transform transition-all duration-300 hover:scale-[1.02]",children:[e.nova?(0,t.jsx)("span",{className:"absolute top-2 right-2 bg-brasil-green text-white px-3 py-1 rounded-full text-sm font-medium",children:"Nova"}):(0,t.jsx)("span",{className:"absolute top-2 right-2 bg-brasil-yellow text-brasil-blue px-3 py-1 rounded-full text-sm font-medium",children:"Repetida"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-brasil-blue",children:e.jogador.nome}),(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-brasil-green",children:"Time:"})," ",(0,t.jsx)("span",{className:"text-brasil-blue",children:e.jogador.time.nome})]}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-brasil-green",children:"Posi\xe7\xe3o:"})," ",(0,t.jsx)("span",{className:"text-brasil-blue",children:e.jogador.posicao})]}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-brasil-green",children:"Idade:"})," ",(0,t.jsxs)("span",{className:"text-brasil-blue",children:[e.jogador.idade," anos"]})]})]})]})]},e.id))})})]}),(0,t.jsx)("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:(0,t.jsx)("button",{type:"button",className:"w-full justify-center rounded-lg bg-brasil-blue px-4 py-2 text-sm font-semibold text-brasil-yellow shadow-sm hover:bg-brasil-blue/80 transition-colors sm:w-auto",onClick:a,children:"Fechar"})})]})})})})]})})}var m=a(6766);function u(){let{data:e,status:s}=(0,r.useSession)(),a=(0,i.useRouter)(),[o,n]=(0,l.useState)([]),[c,u]=(0,l.useState)(!0),[h,x]=(0,l.useState)(null),[p,b]=(0,l.useState)(!1),[g,f]=(0,l.useState)([]),[j,v]=(0,l.useState)(new Set);(0,l.useEffect)(()=>{"unauthenticated"===s?a.push("/login"):"authenticated"===s&&(N(),y())},[s,a]);let y=async()=>{try{var s;let a=await fetch("/api/meu-album",{headers:{Authorization:"Bearer ".concat(null==e||null==(s=e.user)?void 0:s.email)}});if(a.ok){let e=(await a.json()).jogadores,s=new Set(e.map(e=>e.id));v(s)}}catch(e){console.error("Erro ao carregar figurinhas do usu\xe1rio:",e)}},N=async()=>{try{var s;let t=await fetch("/api/pacotes",{headers:{Authorization:"Bearer ".concat(null==e||null==(s=e.user)?void 0:s.email)}});if(!t.ok){if(401===t.status)return void a.push("/login");throw Error("Erro ao carregar pacotes")}let l=await t.json();n(l.filter(e=>!e.aberto))}catch(e){x("Erro ao carregar pacotes"),console.error(e)}finally{u(!1)}},w=async s=>{try{var a;let t=await fetch("/api/pacotes/abrir",{method:"POST",headers:{Authorization:"Bearer ".concat(null==e||null==(a=e.user)?void 0:a.email),"Content-Type":"application/json"},body:JSON.stringify({pacoteId:s})});if(!t.ok)throw Error("Erro ao abrir pacote");let l=(await t.json()).figurinhas.map(e=>({...e,nova:!j.has(e.jogador.id)}));console.log("Figurinhas processadas:",l),f(l),b(!0),N(),y()}catch(e){x("Erro ao abrir pacote"),console.error(e)}};return c?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-red-500",children:h})}):(0,t.jsxs)("div",{className:"min-h-screen py-8",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-brasil-blue",children:"Meus Pacotes"}),(0,t.jsxs)("span",{className:"text-lg text-brasil-blue bg-brasil-yellow/20 px-4 py-2 rounded-lg",children:[o.length," ",1===o.length?"pacote(s) dispon\xedvel(is)":"pacote(s) dispon\xedvel(is)"]})]}),0===o.length?(0,t.jsx)("div",{className:"text-center py-12 bg-white/80 backdrop-blur-sm rounded-lg shadow-lg",children:(0,t.jsx)("p",{className:"text-brasil-blue",children:"Adquira mais pacotes e complete seu \xe1lbum!"})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>(0,t.jsx)("div",{className:"relative group cursor-pointer transform transition-all duration-300 hover:scale-105",onClick:()=>w(e.id),children:(0,t.jsxs)("div",{className:"relative w-full h-[300px] bg-white/80 backdrop-blur-sm rounded-lg shadow-lg overflow-hidden",children:[(0,t.jsx)(m.default,{src:"/pacote-figurinhas.png",alt:"Pacote de Figurinhas",fill:!0,className:"object-contain p-4"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-brasil-blue/80 backdrop-blur-sm",children:(0,t.jsx)("button",{className:"bg-brasil-yellow text-brasil-blue font-bold py-3 px-6 rounded-lg shadow-lg transform transition-transform duration-300 hover:scale-110",children:"Abrir Pacote"})})]})},e.id))})]}),(0,t.jsx)(d,{isOpen:p,onClose:()=>b(!1),figurinhas:g})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[108,766,722,441,684,358],()=>s(4546)),_N_E=e.O()}]);